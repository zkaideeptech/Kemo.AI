# 🏛️ KEMO - 项目宪法 (Project Constitution)

> **版本**: v1.0.0
> **创建日期**: 2026-02-05
> **最后更新**: 2026-02-05

---

## 第一章：项目使命与边界

### 第一条：核心使命
本项目旨在将访谈音频自动转写并稳定产出 IC Q&A 与公众号长文，通过异步任务流水线 + Qwen3-ASR + GPT-5.2 + Supabase，解决访谈整理与输出成本高的问题，为投资研究、咨询与内容团队提供高效、可复用的访谈产出。

### 第二条：目标用户群体
1. **投资研究/VC/PE/咨询分析师** - 需要高质量访谈纪要与结构化结论的研究人员
2. **产品/市场/内容团队** - 需要把访谈转化为对外发布内容的团队

### 第三条：功能边界（严禁越界）

#### ✅ 允许的功能范围
| 编号 | 功能模块 | 描述 |
|------|----------|------|
| F1 | 任务创建与上传 | 上传访谈音频并创建 Job |
| F2 | ASR 转写 | 异步调用 Qwen3-ASR 生成转写 |
| F3 | 术语候选抽取与确认 | 规则+LLM 抽取术语并进行 Terms Review |
| F4 | IC Q&A | 生成 IC Q&A 纪要 |
| F5 | 公众号长文 | 生成公众号长文输出 |
| F6 | AI 功能 | Qwen3-ASR + GPT-5.2 + 术语抽取与确认 |
| F7 | 多语言 | 简体中文、繁体中文、英文 (默认配置 i18n) |
| F8 | UI/UX | 成熟 SaaS 观感，非 AI demo 味 |
| F9 | 隐私安全 | 敏感数据仅本地加密存储，用户主动分享时点对点端到端加密 |
| F10 | 账户体系 | Supabase Auth 登录/注册 |
| F11 | 商业化 | Stripe 订阅 free/pro（预留 Webhook） |

#### ❌ 禁止的功能范围
- 任何在 HTTP 请求内执行长任务的实现
- 自建或本地运行 ASR/LLM 模型
- 前端暴露 `service_role_key` 或绕过 RLS
- 承诺大陆 100% 可访问的宣传

### 第四条：AI知识来源限制 [如有AI]
AI Agent调用的知识来源**仅限**：
1. 用户上传内容（音频/转写文本）
2. Seed 术语库与用户确认的 `glossary_terms` / `confirmations`
3. 受控搜索 API 或 Wikidata（需授权与边界控制）

> [!CAUTION]
> 禁止使用未经授权的第三方数据源，禁止公开抓取

---

## 第二章：技术路线约束

### 第五条：平台开发顺序
1. **第一阶段**: Web 端 (Next.js App Router + Supabase) MVP 先行
2. **第二阶段**: 队列/Worker 稳定化 + 计费/配额完善
3. **第三阶段**: 搜索/知识图谱与多渠道输入扩展

### 第六条：技术栈强制要求
| 层级 | 技术选型 | 备注 |
|------|----------|------|
| 跨平台框架 | Web 优先（不启用跨平台框架） | 首期不做移动端跨平台 |
| 后端服务 | Supabase | 必选：Auth + Postgres + RLS + Realtime |
| 数据管理 | Postgres + RLS | 必选：行级权限控制 |
| 国际化 | i18n / next-intl | 必选：zh/en |
| 前端框架 | React (Next.js) | 必选：App Router + TS |
| 前端架构 | 模块化 | Providers / workflows 分层 |
| 原生能力 | 不使用 | 首期不接入原生能力 |

### 第七条：技术选型变更流程
任何技术选型的变更必须：
1. 提出书面变更申请
2. 说明变更原因和影响评估
3. 获得项目负责人批准

---

## 第三章：验收标准 (Definition of Done)

> [!IMPORTANT]
> 此条款为项目核心原则，必须严格执行

### 第八条：模块验收标准 (DOD)
每个功能模块在开发完成后，**必须满足以下全部条件**才能进入下一模块开发：

#### 8.1 代码层面
- [ ] 代码能够成功编译，无编译错误
- [ ] 所有单元测试通过
- [ ] 代码符合架构规范
- [ ] 注释完整且可读
- [ ] 必须在模拟器/真机中跑通

#### 8.2 功能层面
- [ ] 功能在目标设备上能正常运行
- [ ] 核心用户流程可完整走通
- [ ] 无阻塞性(Blocking)Bug

#### 8.3 集成层面
- [ ] 与已完成模块无冲突
- [ ] API接口正常调用
- [ ] 数据存储和读取正常

### 第九条：验收流程
```
开发完成 → 自测通过 → 模拟器运行验证 → 功能确认 → 进入下一模块
    ↑                                        ↓
    └──────────── 不通过则返回修复 ──────────┘
```

### 第十条：阻塞原则
- 当前模块未通过验收前，**禁止**开始下一模块开发
- 发现阻塞性问题必须**立即修复**
- 模块进度需在开发日志中实时更新

---

## 第四章：交互流程规范

### 第十一条：核心用户流程
```
登录 → 创建任务并上传音频 → 上传之后显示成功/失败的界面 → 自动进入任务详情 → Terms Review → 模糊词用户确认 → 生成 IC/公众号输出 → 在对话框里直接生成
```

> [!IMPORTANT]
> 所有长任务必须异步执行，状态通过 Realtime 或轮询实时更新

### 第十二条：用户体验原则
1. **成熟 SaaS 观感** - 统一排版与层级、避免 AI demo 风格
2. **状态透明** - 任务状态清晰可见，错误可追溯
3. **低摩擦操作** - 上传/确认/导出操作尽量短路径

---

## 第五章：数据与隐私

### 第十三条：数据存储原则
1. **所有上传的音频进行转录和编译之后不用存储** - 转写完成后即删除原始音频，不做持久化保存
2. **转写文本** - 仅在任务生命周期内保留，用于生成输出
3. **本地加密** - 设备内加密存储
4. **传输加密** - 端到端加密

### 第十四条：数据同步策略
- 非敏感数据：云端同步
- 敏感数据：仅本地加密存储，不上云
- 分享/导出：用户主动触发

---

## 第六章：修订与解释

### 第十五条：宪法修订
本宪法的任何修订需经项目负责人书面批准。

### 第十六条：解释权
本宪法的最终解释权归项目负责人所有。

---

**签署确认**：
项目负责人：_______________
日期：2026年02月05日
